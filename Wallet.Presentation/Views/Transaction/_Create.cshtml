@model Wallet.Shared.Contract.ViewModels.TransactionVm.TransactionVm
<form id="CreateTransaction" class="w-100">
    <!-- ردیف اول -->
    <div class="row mb-3">
        <!-- نام تراکنش -->
        <div class="col-md-6">
            <label for="Name" class="form-label">نام تراکنش</label>
            <input type="text" class="form-control shadow rounded-2 text-right" asp-for="Name">
        </div>
        <!-- نام کیف پول (WalletId) -->
        <div class="col-md-6">
            <label for="WalletId" class="form-label">نام کیف پول</label>
            <input type="text" class="form-control shadow rounded-2 text-right" asp-for="WalletId">
        </div>
    </div>
    <!-- ردیف دوم -->
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="TransactionTypeId" class="form-label">نوع تراکنش</label>
            <input type="text" asp-for="TransactionTypeId" class="form-control shadow rounded-2">
        </div>
        <!-- تاریخ -->
        <div class="col-md-6">
            <label for="SaveDate" class="form-label">تاریخ</label>
            <input type="text" asp-for="SaveDate" class="form-control shadow rounded-2 ">
        </div>
    </div>
    <!-- ردیف دکمه‌ها -->
    <div class="row">
        <div class="col-12 text-center d-flex justify-content-center gap-2">
            <!-- دکمه ثبت -->
            <button type="button" onclick="AddTransaction()" class="btn btn-success shadow rounded-2">
                ثبت
            </button>
           
        </div>
    </div>
</form>

<script>
    function AddTransaction() {
        var formData = {
            Name: $('#Name').val(),
            WalletId: $('#WalletId').val(),
            TransactionTypeId: $('#TransactionTypeId').val(),
            SaveDate: $('#SaveDate').val()
        };

        $.ajax({
            type: "POST",
            url: "/Transaction/Create",
            data: formData,
            success: function (response) {
                // اکنون response شامل state و message است
                if (response.state > 0 && response.state < 1000) {
                    swal.fire({
                        title: 'موفق!',
                        html: response.message, // پیام از سمت سرور خوانده می‌شود
                        icon: 'success',
                        confirmButtonText: 'تایید'
                    }).then(function () {
                        window.location.reload();
                    });
                } else {
                    swal.fire({
                        title: 'خطا!',
                        html: response.message, // پیام خطا از سمت سرور خوانده می‌شود
                        icon: 'error',
                        confirmButtonText: 'تایید'
                    });
                }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                swal.fire({
                   title: 'خطا!',
                   html: 'خطا در برقراری ارتباط با سرور',
                   icon: 'error',
                   confirmButtonText: 'تایید'
                });
            }
        });
    }
</script>