@model Wallet.Shared.Contract.ViewModels.WalletVm.WalletVm

<form id="CreateWallet" class="w-100">

    <!-- ردیف اول -->
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="Name" class="form-label">نام کیف پول</label>
            <input type="text" class="form-control shadow rounded-2 text-right" asp-for="Name">
        </div>
        <div class="col-md-6">
            <label for="SubSysId" class="form-label">نام شرکت</label>
            <input type="text" class="form-control shadow rounded-2 text-right" asp-for="SubSysId">
        </div>

    </div>

    <!-- ردیف دوم -->
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="Balance" class="form-label">موجودی</label>
            <input type="number" class="form-control shadow rounded-2 text-right" asp-for="Balance">
        </div>
        <div class="col-md-6">
            <label for="SaveDate" class="form-label">تاریخ</label>
            <input type="text" class="form-control shadow rounded-2 text-right" asp-for="SaveDate">
        </div>
    </div>
    <div class="row">
        <div class="col-12 text-center d-flex justify-content-center gap-2">
            <!-- دکمه ثبت -->
            <button type="button" onclick="AddWallet()" class="btn btn-success shadow rounded-2">
                ثبت
            </button>
        </div>
    </div>

    

</form>

<script>
    function AddWallet() {

        var formData = {
            Name: $('#Name').val(),
            SubSysId: $('#SubSysId').val(),
            Balance: $('#Balance').val(),
            SaveDate: $('#SaveDate').val()
        };

        if (!formData.Name || formData.Name.trim() === "") {
            Swal.fire('هشدار', 'لطفاً نام کیف پول را وارد کنید.', 'warning');
            return;
        }

        if (formData.Balance === "" || formData.Balance === null) {
            Swal.fire('هشدار', 'لطفاً موجودی را وارد کنید.', 'warning');
            return;
        }
        $.ajax({
            type: "POST",
            url: "/Wallet/Create",

            data: formData,
                success: function (data) {
                if (data) {
                    swal.fire({
                        title:'موفق!',
                        html:  'اطلاعات با موفقیت ثبت شد.',
                        icon:'success',
                        confirmButtonText:'تایید'
                    }).then(function () {
                        window.location.reload();
                    });
                } else {
                    swal.fire({
                        title: 'خطا!',
                        html: 'انجام عملیات با خطا مواجه شد.',
                        icon: 'error',
                        confirmButtonText: 'تایید'
                    });
                }
            },
            error: function (xhr, status, error) {
          
                var errorMessage = 'سرویس مورد نظر در دسترس نمی‌باشد';
                if (xhr.responseJSON && xhr.responseJSON.Message) {
                    errorMessage = xhr.responseJSON.Message;
                }
                Swal.fire('خطا!', errorMessage, 'error');
            }
        });
    }
</script>
